<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rune Hunters - Archaeological Adventure</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
<div id="gameContainer">
  <canvas id="gameCanvas"></canvas>
  <div id="nightOverlay"></div>
  <div id="tutorialOverlay"></div>
  
  <div id="hud">
    <div id="topLeftPanel" class="hud-element top-left">
      Time: <span id="timeDisplay">9:00 AM, Day 1</span><br>
      Research Points: <span id="moneyDisplay">0</span>
    </div>
    <div id="topRightPanel" class="hud-element top-right">
      <button id="researchTreeButton" class="action-button" tabindex="1">Research Tree</button>
      <button id="settingsButton" class="action-button" tabindex="2">Settings</button>
    </div>
    <div id="bottomLeftPanel" class="hud-element bottom-left" style="display:none">
      <strong>Collected Artifacts</strong><br>
      <div id="inventoryDisplay"></div>
    </div>
  </div>

  <div id="messageBox">
    <p id="messageText"></p>
  </div>
  
  <div id="tutorialBox" class="hud-element" style="display:none">
    <p id="tutorialText"></p>
    <button id="nextTutorialButton" class="action-button" style="margin-top:10px" tabindex="3">Next</button>
  </div>
</div>

<div id="settingsModal" class="modal-overlay" style="display:none">
  <div class="modal-content">
    <h2>Game Settings</h2>
    <button id="controlsButton" class="action-button">Controls</button>
    <button id="howToPlayButton" class="action-button" tabindex="16">How To Play</button>
    <button id="restartTutorialInModal" class="action-button" tabindex="17">Restart Tutorial</button>
    <button id="showCreditsButton" class="action-button" tabindex="18">Credits</button>
    <button id="resetProgressButton" class="action-button red" tabindex="19">Reset All Progress</button>
    <button id="closeSettingsModal" class="action-button" tabindex="20">Close</button>
  </div>
</div>

<div id="controlsModal" class="modal-overlay" style="display:none">
  <div class="modal-content">
    <h2>Controls</h2>
    <div style="display:flex;gap:10px;justify-content:center;margin-bottom:20px">
      <button id="settingsSelectKeyboard" class="action-button">Keyboard Controls</button>
      <button id="settingsSelectTouch" class="action-button">Touch Controls</button>
    </div>
    <div id="keybindsSection" style="display:none">
      <div class="keybinds-grid">
        <div class="keybind-setting"><span>Move Up:</span><button id="keybind-up1-btn" class="action-button keybind-btn" onclick="startKeybindChange('up',0)">W</button><button id="keybind-up2-btn" class="action-button keybind-btn" onclick="startKeybindChange('up',1)">-</button></div>
        <div class="keybind-setting"><span>Move Down:</span><button id="keybind-down1-btn" class="action-button keybind-btn" onclick="startKeybindChange('down',0)">S</button><button id="keybind-down2-btn" class="action-button keybind-btn" onclick="startKeybindChange('down',1)">-</button></div>
        <div class="keybind-setting"><span>Move Left:</span><button id="keybind-left1-btn" class="action-button keybind-btn" onclick="startKeybindChange('left',0)">A</button><button id="keybind-left2-btn" class="action-button keybind-btn" onclick="startKeybindChange('left',1)">-</button></div>
        <div class="keybind-setting"><span>Move Right:</span><button id="keybind-right1-btn" class="action-button keybind-btn" onclick="startKeybindChange('right',0)">D</button><button id="keybind-right2-btn" class="action-button keybind-btn" onclick="startKeybindChange('right',1)">-</button></div>
        <div class="keybind-setting"><span>Interact:</span><button id="keybind-interact1-btn" class="action-button keybind-btn" onclick="startKeybindChange('interact',0)">E</button><button id="keybind-interact2-btn" class="action-button keybind-btn" onclick="startKeybindChange('interact',1)">-</button></div>
        <div class="keybind-setting"><span>Return:</span><button id="keybind-return1-btn" class="action-button keybind-btn" onclick="startKeybindChange('return',0)">R</button><button id="keybind-return2-btn" class="action-button keybind-btn" onclick="startKeybindChange('return',1)">-</button></div>
      </div>
    </div>
    <button id="closeControlsModal" class="action-button">Back to Settings</button>
  </div>
</div>

<div id="artifactModal" class="modal-overlay" style="display:none">
  <div class="modal-content">
    <h2 id="artifactName">Artifact Discovered!</h2>
    <p id="artifactDescription"></p>
    <button id="closeArtifactModal" class="action-button" tabindex="21">Continue Digging</button>
  </div>
</div>

<div id="documentationModal" class="modal-overlay" style="display:none">
  <div class="modal-content">
    <h2>Document Artifacts</h2>
    <p id="documentationMessage">Processing your findings...</p>
    <div id="documentationList"></div>
    <button id="closeDocumentationModal" class="action-button" tabindex="22">Exit Lab</button>
  </div>
</div>

<div id="sleepModal" class="modal-overlay" style="display:none">
  <div class="modal-content">
    <h2>End of Day</h2>
    <p id="sleepMessage">Rest up for tomorrow excavations?</p>
    <button id="confirmSleep" class="action-button" tabindex="24">Sleep (Start New Day)</button>
    <button id="cancelSleep" class="action-button red" tabindex="25">Stay Awake</button>
  </div>
</div>

<div id="researchTreeModal" class="modal-overlay" style="display:none">
  <div class="modal-content">
    <h2>Research Tree</h2>
    <p>Unlock upgrades to improve your archaeological abilities</p>
    <div id="researchTreeContent" class="research-tree"></div>
    <button id="closeResearchTreeModal" class="action-button" tabindex="26">Close</button>
  </div>
</div>

<div id="researchTooltip" class="research-tooltip">
  <h3 id="tooltipName"></h3>
  <p id="tooltipCost" class="cost"></p>
  <p id="tooltipEffect" class="effect"></p>
  <div class="requirements">
    <h4>Requirements:</h4>
    <div id="tooltipRequirements"></div>
  </div>
</div>

<div id="questBoardModal" class="modal-overlay" style="display:none">
  <div class="modal-content">
    <h2>Quest Board</h2>
    <p>Complete quests to unlock storyline discoveries and earn rewards!</p>
    <div id="questBoardContent"></div>
    <button id="closeQuestBoardModal" class="action-button" tabindex="27">Close</button>
  </div>
</div>

<div id="creditsModal" class="modal-overlay" style="display:none">
  <div class="modal-content">
    <h2>Game Credits</h2>
    <div class="credits-section">
      <p><strong>Version 3.7</strong></p>
      <h3>Developers:</h3>
      <p>FLL Team 56913</p>
      <p>IDK R0b0c0ns</p>
      <p>Claude Sonnet 4.5</p>
    </div>
    <button id="closeCreditsModal" class="action-button" tabindex="28">Close</button>
  </div>
</div>

<div id="missionCompleteModal" class="modal-overlay" style="display:none">
  <div class="modal-content">
    <h2>Mission Complete!</h2>
    <p style="font-size:18px;color:#ffd700"><strong>Congratulations!</strong></p>
    <p>You have completed the archaeological journey!</p>
    <button id="continueExploringButton" class="action-button" tabindex="29">Continue Exploring</button>
    <button id="closeMissionCompleteModal" class="action-button" tabindex="30">Return to Game</button>
  </div>
</div>

<div id="lateNightModal" class="modal-overlay" style="display:none">
  <div class="modal-content">
    <h2>It is Late...</h2>
    <p>It is 11 PM. You should head to camp to sleep.</p>
    <p>Time is frozen until you rest.</p>
    <button id="closeLateNightModal" class="action-button" tabindex="31">Understood</button>
  </div>
</div>

<div id="confirmModal" class="modal-overlay" style="display:none">
  <div class="modal-content">
    <h2>Reset Progress?</h2>
    <p>Are you sure you want to reset all your progress?</p>
    <button id="confirmResetBtn" class="action-button red" tabindex="32">Confirm Reset</button>
    <button id="cancelResetBtn" class="action-button" tabindex="33">Cancel</button>
  </div>
</div>

<div id="howToPlayModal" class="modal-overlay" style="display:none">
  <div class="modal-content">
    <h2>How To Play</h2>
    <div class="help-section">
      <h3>Movement</h3>
      <p>Use <strong id="help-move-keys">WASD/Arrow Keys</strong> to move around the world.</p>
    </div>
    <div class="help-section">
      <h3>Digging</h3>
      <p>Dig sites have 5-10 hidden layers. Only one layer is visible at a time. Click tiles to excavate them.</p>
    </div>
    <div class="help-section">
      <h3>Artifacts</h3>
      <p>Artifacts you collect appear in your inventory. Bring them to the Lab to document and earn research points.</p>
    </div>
    <div class="help-section">
      <h3>Research Tree</h3>
      <p>Spend research points to unlock upgrades.</p>
    </div>
    <div class="help-section">
      <h3>Camp and Lab</h3>
      <p>Camp: Sleep to start a new day. Lab: Document artifacts to earn Research Points.</p>
    </div>
    <button id="closeHowToPlayModal" class="action-button" tabindex="34">Close</button>
  </div>
</div>

<div id="controlSchemeModal" class="modal-overlay" style="display:none">
  <div class="modal-content">
    <h2>Choose Control Scheme</h2>
    <p>Select your preferred control method:</p>
    <div style="display:flex;gap:10px;justify-content:center">
      <button id="selectKeyboard" class="action-button">Keyboard Controls</button>
      <button id="selectTouch" class="action-button">Touch Controls</button>
    </div>
  </div>
</div>

<div id="loadingScreen" class="loading-overlay" style="display:flex">
  <p>Loading Rune Hunters...</p>
</div>

<div id="dpad" class="dpad">
  <div class="joystick-container">
    <div id="joystick-base" class="joystick-base"></div>
    <div id="joystick-handle" class="joystick-handle"></div>
    <button id="joystick-center-button" class="joystick-center-button">-</button>
  </div>
</div>

<script src="script.js"></script>
</body>
</html>
